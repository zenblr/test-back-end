<kt-portlet>
    <kt-portlet-body>
        <div class="row">
            <div class="col-12">
                <mat-tab-group [(selectedIndex)]="selected" (selectedTabChange)="next($event)">
                    <mat-tab label="Basic Details">
                        <kt-basic-details (id)="loan($event)" (apiHit)="editId($event)" [details]="customerDetail"
                        (next)="next($event)"></kt-basic-details>
                    </mat-tab>
                    <mat-tab label="Upload Documents">
                        <kt-upload-loan-documents [masterAndLoanIds]="masterAndLoanIds"></kt-upload-loan-documents>
                    </mat-tab>
                    <mat-tab label="Loan Trasnfer Approval" [formGroup]="approvalForm">
                        <div class="row justify-content-center">
                            <div class="col-6">
                                <div class="row">
                                    <div class="col-4 form-label">
                                        <label class="kt-padding-l-10">B.M Status </label>
                                    </div>
                                    <div class="col-6">
                                        <select name="" id="" class="form-control"
                                            formControlName="loanTransferStatusForBM">
                                            <option value="">Select Status</option>
                                            <option [value]="manager.value" *ngFor="let manager of branchManager">
                                                {{manager.name | titlecase}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row kt-padding-t-25 justify-content-center"
                            *ngIf="approvalForm.controls.loanTransferStatusForBM.value && approvalForm.controls.loanTransferStatusForBM.value != 'approved'">
                            <div class="col-6">
                                <div class="row">
                                    <div class="col-4 form-label">
                                        <label class="kt-padding-l-10">Reason</label>
                                    </div>
                                    <div class="col-6">
                                        <select name="" id="" class="form-control" formControlName="reason"
                                            (change)="patchValue()">
                                            <option value="">Select Status</option>
                                            <option [value]="reason.description" *ngFor="let reason of reasons">
                                                {{reason.description | titlecase}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row kt-padding-t-25 justify-content-center"
                            *ngIf="approvalForm.controls.reason.value == 'Other'">
                            <div class="col-6">
                                <div class="row">
                                    <div class="col-10">
                                        <mat-form-field class="w-100">
                                            <mat-label>Reason</mat-label>
                                            <textarea matInput formControlName="reasonByBM"></textarea>
                                        </mat-form-field>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row kt-padding-t-25">
                            <div class="offset-10 col-2">
                                <kt-button [type]="'button'" [value]="'Next'" (click)="approval()"></kt-button>
                            </div>
                        </div>
                    </mat-tab>
                    <mat-tab label="Disbursal" [formGroup]="disbursalForm">

                        <div class="row justify-content-center kt-padding-t-25">
                            <div class="col-6">
                                <div class="row">
                                    <div class="col-4 form-label">
                                        <label for="">LOAN ID</label>
                                    </div>
                                    <div class="col-6">
                                        <input type="text" class="form-control" placeholder="laon id" formControlName="disbursedLoanAmount">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row justify-content-center kt-padding-t-25">
                            <div class="col-6">
                                <div class="row">
                                    <div class="col-4 form-label">
                                        <label for="">Disbursed Loan Amount</label>
                                    </div>
                                    <div class="col-6">
                                        <input type="text" class="form-control" placeholder="1000000" formControlName="loanUniqueId">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row justify-content-center kt-padding-t-25">
                            <div class="col-6">
                                <div class="row">
                                    <div class="col-4 form-label">
                                        <label for="">Transaction ID</label>
                                    </div>
                                    <div class="col-6">
                                        <input type="text" class="form-control" placeholder="Transxxxxx" formControlName="transactionId">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row kt-padding-t-25">
                            <div class="offset-10 col-2">
                                <kt-button [type]="'button'" [value]="'Next'" (click)="disbursal()"></kt-button>
                            </div>
                        </div>
                    </mat-tab>
                </mat-tab-group>
            </div>
        </div>
    </kt-portlet-body>
</kt-portlet>