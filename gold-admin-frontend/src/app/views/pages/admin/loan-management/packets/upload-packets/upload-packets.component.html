<div *ngIf="url != 'view-loan' ">
    <form class="row pl-5" action="" [formGroup]="packetInfo" (submit)="addmore()" #form="ngForm">
        <div class="col-3">
            <select class="form-control packet-dropdown" formControlName="packetId"
                [class.isError]="packetInfo.controls.packetId.invalid && packetInfo.controls.packetId.touched">
                <option value=null [selected]="true">Select Packet</option>
                <option [value]="packet.id" [disabled]="packet.disabled"
                    *ngFor="let packet of packetsDetails; index as idx">
                    {{packet.packetUniqueId | uppercase}}</option>
            </select>

            <mat-error *ngIf="packetInfo.controls.packetId.invalid && packetInfo.controls.packetId.touched">
                <small>
                    Field Required
                </small>
            </mat-error>
        </div>
        <div class="col-3">
            <!-- <select class="form-control packet-dropdown" formControlName="ornamentType"
                [class.isError]="packetInfo.controls.ornamentType.touched && packetInfo.controls.ornamentType.invalid">
                <option value="null" [disabled]="true" [selected]="true">Select Ornament</option>
                <option [value]="ornament.id" [disabled]="ornament.disabled" *ngFor="let ornament of ornamentType">
                    {{ornament.ornamentType | titlecase}}
                </option>
            </select> -->

            <kt-multi-select-search [items]="ornamentType" [multiple]="true" bindLabel="ornamentType"
                formControlName="ornamentType" [bindValue]="'id'" [style]="true"></kt-multi-select-search>

            <mat-error *ngIf="packetInfo.controls.ornamentType.touched && packetInfo.controls.ornamentType.invalid">
                <span *ngIf="packetInfo.controls.ornamentType.errors?.required">Field Required</span>
            </mat-error>
        </div>
        <div class="col-4">
            <kt-button [value]="'ADD'" [type]="'submit'"></kt-button>
        </div>
    </form>
</div>
<div class="pl-5">
    <mat-tab-group [formGroup]="packetImg">
        <mat-tab formArrayName="packetsArray" label="" *ngFor="let packet of packets.controls;index as idx">
            <ng-template mat-tab-label>
                <span
                    class="tab-number text-gray">{{packet.controls.packetsName.value.packetUniqueId | uppercase}}</span>
                <span class="tab-text">{{packet.controls.ornamentsName.value.ornamentType | uppercase}}</span>
                <img class="removeImageSize kt-padding-l-10 kt-pointer" [src]="'assets/media/icons/cancel.png'"
                    (click)="deletePacket(idx)" />
            </ng-template>
            <div class="row" [formGroupName]="idx">
                <div class="col-3 ">
                    <div class="img-container packets" *ngIf="!packet.controls.emptyPacketWithNoOrnament.value"
                        (click)="webcam(idx,$event,'emptyPacketWithNoOrnament')">
                        <img class="placeholder" src="../../../../../assets/media/icons/image-placeholder.png" alt="">
                    </div>
                    <img class="packets position-relative" [src]="packet.controls.emptyPacketWithNoOrnament.value"
                        *ngIf="packet.controls.emptyPacketWithNoOrnament.value">
                    <img *ngIf="packet.controls.emptyPacketWithNoOrnament.value && url != 'view-loan'"
                        src="../../../../../assets/media/icons/edit.svg" alt="" class="kt-pointer edit-icon"
                        (click)="webcam(idx,$event,'emptyPacketWithNoOrnament')">
                    <label class="text-center w-100 font-weight-500 pacekts-label text-gray">Empty Packets with No
                        Ornaments</label>
                    <div>
                        <mat-error
                            *ngIf="packet.controls.emptyPacketWithNoOrnament.touched && packet.controls.emptyPacketWithNoOrnament.invalid">
                            Field Required</mat-error>
                    </div>
                    <input type="file" class="d-none" #emptyPacketWithNoOrnament
                        (change)="uploadFile(idx,'emptyPacketWithNoOrnament',$event)">
                </div>
                <div class="col-3 ">
                    <div class="img-container packets" *ngIf="!packet.controls.packetWithAllOrnaments.value"
                        (click)="webcam(idx,$event,'packetWithAllOrnaments')">
                        <img class="placeholder" src="../../../../../assets/media/icons/image-placeholder.png" alt="">
                    </div>
                    <img class="packets position-relative" [src]="packet.controls.packetWithAllOrnaments.value"
                        *ngIf="packet.controls.packetWithAllOrnaments.value">
                    <img *ngIf="packet.controls.packetWithAllOrnaments.value && url != 'view-loan'"
                        src="../../../../../assets/media/icons/edit.svg" alt="" class="kt-pointer edit-icon"
                        (click)="webcam(idx,$event,'packetWithAllOrnaments')">
                    <label class="text-center w-100 font-weight-500 pacekts-label text-gray"> Packets with All
                        Ornaments</label>
                    <div>
                        <mat-error
                            *ngIf="packet.controls.packetWithAllOrnaments.touched && packet.controls.packetWithAllOrnaments.invalid">
                            Field Required</mat-error>
                    </div>
                    <input type="file" class="d-none" #packetWithAllOrnaments
                        (change)="uploadFile(idx,'packetWithAllOrnaments',$event)">
                </div>
                <div class="col-3 ">
                    <div class="img-container packets" *ngIf="!packet.controls.packetWithSealing.value"
                        (click)="webcam(idx,$event,'packetWithSealing')">
                        <img class="placeholder" src="../../../../../assets/media/icons/image-placeholder.png" alt="">
                    </div>
                    <img class="packets position-relative" [src]="packet.controls.packetWithSealing.value"
                        *ngIf="packet.controls.packetWithSealing.value">
                    <img *ngIf="packet.controls.packetWithSealing.value && url != 'view-loan'"
                        src="../../../../../assets/media/icons/edit.svg" alt="" class="kt-pointer edit-icon"
                        (click)="webcam(idx,$event,'packetWithSealing')">
                    <label class="text-center w-100 font-weight-500 pacekts-label text-gray"> Packets with
                        Sealing</label>
                    <div>
                        <mat-error
                            *ngIf="packet.controls.packetWithSealing.touched && packet.controls.packetWithSealing.invalid">
                            Field Required</mat-error>
                    </div>
                    <input type="file" class="d-none" #packetWithSealing
                        (change)="uploadFile(idx,'packetWithSealing',$event)">

                </div>
                <div class="col-3">
                    <div class="img-container packets" *ngIf="!packet.controls.packetWithWeight.value"
                        (click)="webcam(idx,$event,'packetWithWeight')">
                        <img class="placeholder" src="../../../../../assets/media/icons/image-placeholder.png" alt="">
                    </div>
                    <!-- <span class="pos-action"> -->
                    <img class="packets position-relative" [src]="packet.controls.packetWithWeight.value"
                        *ngIf="packet.controls.packetWithWeight.value">
                    <!-- </span> -->
                    <img *ngIf="packet.controls.packetWithWeight.value && url != 'view-loan'"
                        src="../../../../../assets/media/icons/edit.svg" alt="" class="kt-pointer edit-icon"
                        (click)="webcam(idx,$event,'packetWithWeight')">
                    <label class="text-center w-100 font-weight-500 pacekts-label text-gray"> Packets with
                        Weight</label>
                    <div>
                        <mat-error
                            *ngIf="packet.controls.packetWithWeight.touched && packet.controls.packetWithWeight.invalid">
                            Field Required</mat-error>
                    </div>
                    <input type="file" class="d-none" #packetWithWeight
                        (change)="uploadFile(idx,'packetWithWeight',$event)">

                </div>
            </div>
        </mat-tab>
    </mat-tab-group>
</div>
<div class="text-center save" *ngIf="packets.length > 0">
    <kt-button [type]="'button'" [value]="'Save'" (click)="save()" *ngIf="url != 'view-loan'"></kt-button>
</div>